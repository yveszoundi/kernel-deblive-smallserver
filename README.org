#+TITLE: README

/This is still WORK IN PROGRESS and is only being tested under QEMU/.

* What is this?

** Overview

The goal is to produce /minimal/ Debian kernel images for Live CDs, with a *focus on server systems*.
- The target kernel version is the latest stable release from https://kernel.org
- This is for both =amd64= and =aarch64= architectures  
- Drivers for audio, video or other "non-meaningful" settings are discarded

** Main objectives

- The system should be able to successfully boot from =UEFI= or =BIOS= mode on most machines
- The system should successfully power off without hanging
- The system should support "containerization" (=podman=, =docker=, etc.)
- The system should support =iptables=
- The system should support popular file-systems used in Live CDs such as =squashfs=

** Initial use-case

The first use-case for this repository is supporting the Live CD creation of a document sanitizer tool ([[https://github.com/rimerosolutions/entrusted/][Entrusted]]).
- It takes a while to compile a kernel from source for every single build
- Compiling for =arm64= under =amd64= takes even longer to compile

* How was the configuration defined?

- Start with an Ubuntu kernel configuration in your =/boot= folder
- Compare settings with the [[https://wiki.alpinelinux.org/wiki/Kernels][Alpine Linux virt-flavor]] kernel configuration
- Remove as much as possible while testing few Live CD for both =arm64= and =amd64=
- Stop trying to remove settings when you feel like it's become too risky
  - You could still keep disabling few settings
  - However the kernel would only work for your machine or use-case only...
    
* What is available?

Please visit the [[https://github.com/yveszoundi/kernel-deblive-smallserver/releases][releases page]] for downloads (64-bit: [[https://en.wikipedia.org/wiki/X86-64][amd64/x86_64]] and [[https://en.wikipedia.org/wiki/AArch64][arm64/aarch64]]).

The zip file for each architecture (=amd64= or =arm64=) contains 3 Debian packages:

|------------------+-------------------------------------------------|
| Package          | Description                                     |
|------------------+-------------------------------------------------|
| =linux-headers=  | Linux kernel headers                            |
| =linux-image=    | Linux kernel                                    |
| =linux-libc-dev= | Linux support headers for userspace development |
|------------------+-------------------------------------------------|

The =arm64= kernel packages are created via cross-compilation.

* Where can I read more about this?

- [[https://kernel.org/][The Linux Kernel Archives]]
- Building a Debian kernel package
  - [[https://wiki.debian.org/BuildADebianKernelPackage][Debian wiki page guide]]
  - [[https://www.dwarmstrong.org/kernel/][Blog post from Daniel Wayne Armstrong]]  
- [[https://git.alpinelinux.org/aports/tree/main/linux-lts?h=master][Alpine Linux default kernel configuration files]]
- [[https://romanrm.net/a10/cross-compile-kernel][Kernel cross-compiling notes]]
